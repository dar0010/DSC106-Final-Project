<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nashville Crash Data üöó</title>
  <link href="global.css" rel="stylesheet" />
  <script type="module" src="map.js" defer></script>
  <script type="module" src="dots.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/mapbox-gl@2.15.0/dist/mapbox-gl.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/mapbox-gl@2.15.0/dist/mapbox-gl.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>
  <header class="filter-bar">
    <h1 class="site-title">Crashville üöó</h1>


    <div class="filter-group">
      <label for="dataset-select">Choose dataset:</label>
      <select id="dataset-select">
        <option value="total-accidents">Total accidents</option>
        <option value="injury-fatality">Injuries & fatalities</option>
      </select>
    </div>


    <div class="filter-group">
      <label for="year-select">Filter by year:</label>
      <select id="year-select"><option>Loading...</option></select>
    </div>


    <div class="filter-group">
      <label for="weather-select">Filter by weather:</label>
      <select id="weather-select">
        <option value="all">All</option>
        <option value="CLEAR">Clear</option>
        <option value="CLOUDY">Cloudy</option>
        <option value="RAIN">Rain</option>
        <option value="SNOW">Snow</option>
        <option value="UNKNOWN">Unknown</option>
      </select>
    </div>


    <div class="filter-group">
      <label for="hitrun-select">Filter by hit‚Äërun:</label>
      <select id="hitrun-select">
        <option value="all">All</option>
        <option value="Y">Yes</option>
        <option value="N">No</option>
      </select>
    </div>


    <div class="filter-group">
      <label for="illumination-select">Filter by illumination:</label>
      <select id="illumination-select">
        <option value="all">All</option>
        <option value="DAYLIGHT">Daylight</option>
        <option value="DARK - LIGHTED">Dark ‚Äì Lighted</option>
        <option value="DARK - NOT LIGHTED">Dark ‚Äì Not Lighted</option>
        <option value="DUSK">Dusk</option>
        <option value="UNKNOWN">Unknown</option>
      </select>
    </div>


<div id="time-filter">      
  <label for="time-slider">Filter by time:</label>
      <input type="range" id="time-slider" min="-1" max="1439" value="-1" step="1" />
      <div class="time-display">
        <time id="selected-time"></time>
        <span id="any-time">(any time)</span>
      </div>
    </div>
  </header>


    <div class="writeup">
    <h2>Write up:</h2>
    <p>
      Example text
    </p>
    <p>
      Example text
    </p>
  </div>


  <div id="scrolly">
    <div id="map-story">
      <div class="step" data-step="0">all filler text</div>
      <div class="step" data-step="1">2018 filler text</div>
      <div class="step" data-step="2">2019 filler text</div>
      <div class="step" data-step="3">2020 filler text</div>
      <div class="step" data-step="4">2021 filler text</div>
      <div class="step" data-step="5">2022 filler text</div>
      <div class="step" data-step="6">2023 filler text</div>
      <div class="step" data-step="7">2024 filler text</div>
      <div class="step" data-step="8">2025 filler text</div>
    </div>  
    <div id="map"></div>
  </div>


  <div class="writeup">
    <h2>Write up:</h2>
    <p>
      So far we have converted our crash data into GeoJSON and plotted it on a map of Nashville. We've added time‚Äêbased filters, click popups, and variable circle sizes based on number of vehicles involved. We now offer filters for year, weather, hit/run events, lighting, and an optional view focused on injuries and fatalities to highlight the most severe incidents.
    </p>
    <p>
      Implementing the different datasets and making the scroll narration sync with the injury/fatality view was the biggest challenge. We're excited to explore adding dot animations to represent death/injury counts further in our next update.
    </p>
  </div>
</body>
</html>